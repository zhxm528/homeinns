好，这一步你提得**非常专业，而且顺序是对的** 👍
在真正画 ER、建表之前，**必须先把「业务架构 + 产品信息架构 + UI/交互」定死**，否则后面一定返工。

下面我给你的是一份**“偏产品/体验/业务架构”的 PRD**，它的目标不是给 DBA，而是：

* 给 **管理层**：一眼看懂系统怎么管控
* 给 **产品经理**：知道每个角色能干什么
* 给 **前端 / 交互 / 设计**：知道页面、流程、状态
* 给 **后端**：知道系统边界和模块拆分

我会**刻意回避字段级数据库设计**，只保留到「业务对象 / 页面对象」层级。

---

# 统一促销系统 PRD（业务架构 & UI/交互版）

**版本**：V1.0（一期）
**范围**：业务架构 / 系统模块 / 页面结构 / 交互逻辑
**明确不包含**：数据库表结构、接口字段细节

---

## 一、产品定位 & 核心原则

### 1.1 产品定位（一句话）

> 一个以**价格底限为约束**、以**活动为核心载体**、实现
> **集团统一策略 → 区域精细管控 → 门店灵活执行**
> 的全域促销管理平台。

---

### 1.2 设计核心原则（非常重要）

这是后面所有 UI / 交互 / 架构的“宪法”：

1. **一个入口原则**

   * 所有促销活动，只有一个系统入口
2. **活动是核心对象**

   * 不是“渠道活动”“OTA活动”“抖音活动”
3. **上下游解耦**

   * 申请 ≠ 创建 ≠ 执行 ≠ 复盘
4. **能限制，但不掐死灵活性**

   * 管控 ≠ 一刀切
5. **每个角色只看到“该他操心的那一层”**

---

## 二、整体业务架构（不是技术架构）

### 2.1 三层业务架构（核心）

```
┌──────────────┐
│   集团层     │  ← 策略、规则、底限、活动壳
└─────▲────────┘
      │ 赋能 / 约束
┌─────┴────────┐
│   区域层     │  ← 范围控制、精细化筛选、复盘
└─────▲────────┘
      │ 执行
┌─────┴────────┐
│   门店层     │  ← 报名、上下线、库存、反馈
└──────────────┘
```

> **重要：不是“谁都能干一切事”，而是“同一活动在不同层有不同视角和操作能力”**

---

### 2.2 系统核心业务对象（不等于数据库表）

| 业务对象 | 说明                   |
| ---- | -------------------- |
| 促销活动 | 系统最核心对象              |
| 活动类型 | 折扣 / 一口价 / 房+X / 人群等 |
| 活动规则 | 价格、时间、适用条件           |
| 适用范围 | 区域 / 城市 / 品牌 / 门店    |
| 渠道配置 | 官渠 / OTA / B端 / 私域   |
| 底限规则 | 不可突破的价格/折扣           |
| 报名状态 | 门店是否参与               |
| 执行数据 | 预订、离店、执行率            |

---

## 三、系统模块拆分（产品视角）

### 3.1 一级模块结构（左侧导航）

```
促销系统
├─ 促销总览（Dashboard）
├─ 活动管理
│   ├─ 活动列表
│   ├─ 创建活动（集团）
│   ├─ 活动审批
│   └─ 活动修改 / 上下线
├─ 报名与执行
│   ├─ 区域管控
│   └─ 门店报名
├─ 价格与底限
│   ├─ 底限策略
│   └─ 校验日志
├─ 数据分析
│   ├─ 效果看板
│   └─ 价格复盘
└─ 系统配置（集团）
```

> ⚠️ 注意：
>
> * **门店不会看到「创建活动」「底限策略」**
> * **区域不会看到「系统配置」**

---

## 四、角色视角 & UI 体验设计

下面是 PRD 的核心部分。

---

# 四-1 集团端（收益管理 / 营销中心）

## 4.1.1 集团首页：促销总览 Dashboard

### 页面目标

> 一眼判断：**现在促销是不是“失控 / 过量 / 违规”**

### 核心模块

* 今日 / 本周 / 本月

  * 申请活动数
  * 生效活动数
  * 即将上线 / 即将结束
* 风险提示

  * 接近底限的活动
  * 高折扣 / 短周期活动
* 快捷入口

  * 创建活动
  * 底限配置
  * 查看审批

### 交互要点

* 所有卡片 **可点击 → 下钻到活动列表**
* 红 / 黄 / 绿 风险色标

---

## 4.1.2 活动列表（集团视角）

### 页面定位

> 全集团促销活动“控制塔”

### 核心字段（UI 层）

* 活动名称
* 活动类型
* 覆盖渠道
* 覆盖范围（摘要）
* 状态（草稿 / 生效 / 暂停）
* 是否触发底限校验
* 操作（查看 / 修改 / 上下线）

### 交互设计

* 顶部 **多维筛选**

  * 活动类型
  * 渠道
  * 区域
  * 状态
* 点击活动 → 进入 **活动详情页（只读/可编辑）**

---

## 4.1.3 创建活动（集团）

### 页面逻辑（分步式，强烈建议）

**Step 1：基础信息**

* 活动名称
* 活动类型
* 活动目标（文本）
* 全局活动时间

**Step 2：规则与价格**

* 折扣方式 / 一口价
* 是否短周期免底限
* 实时校验提示（⚠️ 底限风险）

**Step 3：渠道配置**

* 勾选渠道
* 每个渠道 → 独立生效时间

**Step 4：适用范围**

* 区域 / 城市 / 品牌 / 门店
* INCLUDE / EXCLUDE 可视化标签

**Step 5：确认与提交**

* 总览页
* 风险提示
* 提交审批

---

## 4.1.4 活动详情页（集团）

### Tab 结构

* 基础信息
* 规则与价格
* 覆盖范围
* 渠道配置
* 报名情况（只读）
* 操作日志

### 交互重点

* **生效中活动允许“受限修改”**
* 修改需二次确认 + 日志

---

# 四-2 区域端（区域收益 / 运营）

## 4.2.1 区域首页：促销日历

### 页面形态

* 日 / 周 / 月 日历
* 活动块颜色区分状态

### 点击活动弹窗

* 活动规则摘要
* 渠道
* 已报名 / 未报名门店数
* 操作按钮（开启 / 暂停）

---

## 4.2.2 区域精细化管控页

### 页面目标

> 在**不破坏集团规则**的前提下，灵活控制执行范围

### 操作方式

* 多维筛选：

  * 城市
  * 城区
  * 品牌
  * 门店类型
* 批量操作：

  * 开启 / 暂停
  * 只影响“区域层权限”

### UX 重点

* 明确标注：

  > “此操作不会修改集团原始活动规则”

---

## 4.2.3 区域数据看板

### 指标展示

* 活动参与率
* 预订间夜
* 离店间夜
* 执行率

### 交互

* 活动 → 门店下钻
* 支持导出

---

# 四-3 门店端（酒店）

## 4.3.1 门店首页：我的促销日历

### 目标

> 不用培训，门店也能一眼看懂

### 日历块信息

* 活动名
* 渠道
* 折扣/价格
* 状态（可报名 / 已参与 / 已关闭）

---

## 4.3.2 活动报名页

### 页面设计

* 活动规则（只读）
* 可选权益（房 + X）
* 渠道参与开关
* 确认报名

### 防误操作设计

* 高风险活动弹窗提示
* 一口价活动上线提醒

---

## 4.3.3 门店数据反馈页

### 内容

* 各活动效果
* 对比无促销日期
* 简单趋势图

---

## 五、关键交互 & 体验细节（容易被忽略）

### 5.1 风险提示机制（必须做）

* 接近底限 → 黄色
* 突破底限 → 红色（不可提交）
* 短周期免校验 → 明示标签

---

### 5.2 操作权限视觉化

* 灰掉不可操作按钮
* tooltip 明确说明：

  > “该项由集团统一管控”

---

### 5.3 日志与可追溯

* 每个活动都能看到：

  * 谁
  * 在什么时候
  * 改了什么

---

## 六、一期明确不做（写清楚反而是专业）

* 自动推荐活动
* 智能报名
* AI 定价
* 复杂组合促销（叠加计算）

---

## 七、这一版 PRD 的“正确使用方式”

你现在手里已经有三层文档雏形了：

1️⃣ **战略方案（你原始文档）**
2️⃣ **产品 PRD（我刚给你的这版）**
3️⃣ 👉 下一步才是

* 原型图
* ER / 表结构
* 技术架构

---

1）页面清单 + 原型说明** 和 **2）业务架构图 + 权限矩阵图**。写法会尽量“可规则化”，方便你后面抽成 MD 规则文件来生成前端页面。

---

# 1）页面清单 + 原型说明（可用于生成路由 & 页面骨架）

## 1.1 路由树（IA）与页面清单

> 约定：
>
> * `page_id`：全局唯一、稳定（后续 MD 规则文件用）
> * `route`：前端路由
> * `type`：LIST / DETAIL / FORM_WIZARD / DASHBOARD / CALENDAR / ADMIN
> * `roles`：GROUP（集团） / REGION（区域） / HOTEL（门店）
> * `primary_object`：页面核心业务对象（活动/报名/底限…）

### A. 促销总览（Dashboard）

| page_id               | route               | type      | roles  | primary_object | 说明                |
| --------------------- | ------------------- | --------- | ------ | -------------- | ----------------- |
| PAGE_DASHBOARD_GROUP  | `/dashboard`        | DASHBOARD | GROUP  | campaign       | 集团控制塔：总量、风险、审批    |
| PAGE_DASHBOARD_REGION | `/region/dashboard` | DASHBOARD | REGION | campaign       | 区域概览：参与率、风险、门店下钻  |
| PAGE_DASHBOARD_HOTEL  | `/hotel/dashboard`  | DASHBOARD | HOTEL  | campaign       | 门店概览：近期活动、提醒、报名入口 |

---

### B. 活动管理（Campaign）

| page_id                       | route                 | type        | roles                  | primary_object | 说明              |
| ----------------------------- | --------------------- | ----------- | ---------------------- | -------------- | --------------- |
| PAGE_CAMPAIGN_LIST            | `/campaigns`          | LIST        | GROUP,REGION           | campaign       | 活动列表（控制塔/区域视角）  |
| PAGE_CAMPAIGN_DETAIL          | `/campaigns/:id`      | DETAIL      | GROUP,REGION,HOTEL(只读) | campaign       | 活动详情（Tabs）      |
| PAGE_CAMPAIGN_CREATE          | `/campaigns/create`   | FORM_WIZARD | GROUP                  | campaign       | 创建活动（向导式）       |
| PAGE_CAMPAIGN_EDIT            | `/campaigns/:id/edit` | FORM_WIZARD | GROUP                  | campaign       | 修改活动（受限）        |
| PAGE_CAMPAIGN_APPROVAL_LIST   | `/approvals`          | LIST        | GROUP                  | request        | 申请/审批列表（承接 BPM） |
| PAGE_CAMPAIGN_APPROVAL_DETAIL | `/approvals/:id`      | DETAIL      | GROUP                  | request        | 申请单详情+审批动作      |

---

### C. 报名与执行（Enroll & Execution）

| page_id              | route                       | type     | roles  | primary_object | 说明             |
| -------------------- | --------------------------- | -------- | ------ | -------------- | -------------- |
| PAGE_CALENDAR_REGION | `/region/calendar`          | CALENDAR | REGION | campaign       | 区域促销日历（含报名统计）  |
| PAGE_CALENDAR_HOTEL  | `/hotel/calendar`           | CALENDAR | HOTEL  | campaign       | 门店我的促销日历       |
| PAGE_REGION_CONTROL  | `/region/control`           | LIST     | REGION | campaign_scope | 区域精细化管控（批量启停）  |
| PAGE_HOTEL_ENROLL    | `/hotel/enroll/:campaignId` | FORM     | HOTEL  | enroll         | 门店报名页（权益、渠道开关） |
| PAGE_ENROLL_STATUS   | `/region/enroll-status`     | LIST     | REGION | enroll         | 区域报名明细（已报/未报）  |

---

### D. 价格与底限（Floor & Validation）

| page_id                | route                    | type  | roles | primary_object | 说明           |
| ---------------------- | ------------------------ | ----- | ----- | -------------- | ------------ |
| PAGE_FLOOR_POLICY_LIST | `/floors`                | ADMIN | GROUP | floor_policy   | 底限策略列表       |
| PAGE_FLOOR_POLICY_EDIT | `/floors/:id`            | ADMIN | GROUP | floor_policy   | 底限策略编辑       |
| PAGE_VALIDATION_LOG    | `/floors/validation-log` | LIST  | GROUP | validation     | 校验日志（谁触发、结果） |

---

### E. 数据分析（Analytics）

| page_id                 | route                      | type      | roles                  | primary_object | 说明         |
| ----------------------- | -------------------------- | --------- | ---------------------- | -------------- | ---------- |
| PAGE_ANALYTICS_OVERVIEW | `/analytics`               | DASHBOARD | GROUP,REGION           | metrics        | 效果看板（活动维度） |
| PAGE_ANALYTICS_CAMPAIGN | `/analytics/campaigns/:id` | DETAIL    | GROUP,REGION,HOTEL(只读) | metrics        | 活动复盘详情     |
| PAGE_ANALYTICS_HOTEL    | `/analytics/hotel`         | DASHBOARD | HOTEL                  | metrics        | 门店活动效果页    |

---

## 1.2 全局 UI 结构规范（生成器最需要）

### Layout

* 左侧：主导航（按角色裁剪）
* 顶部：面包屑 + 全局搜索（按活动名/ID）+ 账号菜单
* 主内容：页面标题 + 操作区（按钮）+ 内容区（卡片/表格/图表）

### 通用三态（每页必须定义）

* Loading：骨架屏（表格 skeleton / 卡片 skeleton）
* Empty：空态文案 + 引导按钮（如“去创建活动”）
* Error：错误提示 + 重试按钮 + 错误码展示（便于排查）

---

## 1.3 样板页原型说明（重点 6 个页面）

下面每个页面都按“生成前端必须信息”的粒度写：**模块区块、组件、字段、动作、状态、交互规则**。

---

### 页面 1：PAGE_CAMPAIGN_LIST（活动列表）

**页面目标**：全局活动控制塔（集团/区域共用，权限不同）

**页面区块**

1. FilterBar（筛选条）

* 活动类型（多选）
* 渠道（多选）
* 区域/城市（级联选择）
* 状态（单选）
* 时间范围（活动全局时间）
* 关键字搜索（活动名/ID）

2. SummaryChips（筛选结果摘要）

* “已筛选：类型=一口价，状态=生效中…”

3. DataTable（活动表格）

* 列建议：

  * 活动名称（可点击进入详情）
  * 活动类型
  * 覆盖渠道（Tag 列表）
  * 覆盖范围摘要（Tooltip 展开）
  * 状态（Badge）
  * 风险等级（RiskBadge）
  * 更新时间
  * 操作（更多菜单）

4. BulkActions（批量操作，按角色显示）

* GROUP：批量暂停/下线、导出
* REGION：批量启停（仅区域权限范围内）、导出
* HOTEL：不显示

**行操作（ActionMenu）**

* 查看详情（所有角色）
* 复制活动（GROUP）
* 暂停/恢复（GROUP/REGION 受限）
* 下线（GROUP）
* 查看复盘（GROUP/REGION）

**关键交互**

* 风险等级 hover 显示原因（例如：接近底限、短周期免校验）
* 切换筛选立即刷新（带 debounce）
* 支持保存筛选为“我的常用视图”（一期可不做，但建议预留）

---

### 页面 2：PAGE_CAMPAIGN_DETAIL（活动详情 Tabs）

**Tab 结构**

1. 基础信息（只读为主）
2. 规则与价格（GROUP 可编辑；其他只读）
3. 覆盖范围（GROUP/REGION 可见，REGION可做“区域启停”入口）
4. 渠道配置（GROUP 可编辑每渠道生效时间；REGION/HOTEL 只读）
5. 报名情况（GROUP/REGION 可见统计与明细；HOTEL 仅看自己）
6. 操作日志（GROUP/REGION 可见）

**顶部状态条（非常关键）**

* 活动状态 Badge
* 风险 RiskBadge
* 主操作按钮（按角色+状态机展示）：

  * GROUP：编辑 / 暂停 / 下线
  * REGION：区域启停
  * HOTEL：去报名 / 去日历查看

---

### 页面 3：PAGE_CAMPAIGN_CREATE（创建活动向导 Wizard）

**Wizard Step**

1. 基础信息
2. 规则与价格（实时底限校验）
3. 渠道配置（渠道多选 + 每渠道时间）
4. 适用范围（Include/Exclude 可视化）
5. 确认提交（总览 + 风险提示）

**交互规则（生成器要写死）**

* Step2 输入折扣/一口价 → 触发 `validateFloor()` → 返回：

  * `risk_level` + `risk_reason[]`
  * `blocking=true/false`
* blocking=true：禁止进入下一步 + 红色错误文案
* 进入 Step5：展示“变更摘要”（类似 Git diff 的效果）

---

### 页面 4：PAGE_CALENDAR_REGION / PAGE_CALENDAR_HOTEL（日历）

**日历视图**

* 日/周/月切换
* 活动块：

  * 名称
  * 状态颜色
  * 风险小点
  * 渠道 icon/标签

**点击活动块弹窗**

* 规则摘要
* 渠道
* 报名统计（区域：已报/未报；门店：自己状态）
* 快捷动作按钮：

  * REGION：区域启停 / 查看报名明细
  * HOTEL：去报名 / 关闭渠道（若允许）

---

### 页面 5：PAGE_REGION_CONTROL（区域精细化管控）

**页面结构**

* 左侧：过滤条件（城市/城区/品牌/门店类型/活动类型）
* 右侧：活动列表（只显示区域可管控的活动）
* 批量操作：开启/暂停（只影响区域层执行范围）

**UX 强提示**

* 页面顶部固定提示条：
  “此处操作不改变集团活动规则，仅影响本区域执行状态”

---

### 页面 6：PAGE_HOTEL_ENROLL（门店报名页）

**页面结构**

1. 活动摘要卡（只读）
2. 报名配置

* 渠道参与开关（按渠道列出）
* 权益选择（房+X：多选、最多 N 个）
* 提交报名按钮

3. 风险提示

* 如果是一口价新活动：提示“注意库存机会点”
* 如果高风险：提交前二次确认弹窗（ConfirmModal）

---

# 2）促销系统业务架构图 + 权限矩阵图（给管理层）

## 2.1 业务架构图（文字版，可直接转 Mermaid）

### 业务流（端到端）

1. **活动申请（BPM/申请入口）**
2. **审批与底限测算（集团）**
3. **活动创建（集团促销系统）**
4. **范围与渠道发布（集团）
5. **区域精细化启停（区域）**
6. **门店报名与渠道开关（门店）**
7. **执行数据回流（订单/库存/离店）**
8. **效果看板与复盘（集团/区域/门店）**

### 分层职责（管理口径）

* 集团：定规则、定底限、建活动壳、全域风险兜底
* 区域：在规则内“调节阀”（启停、督导报名、复盘）
* 门店：执行端（报名、开关、库存、反馈）

---

## 2.2 权限矩阵图（最关键的“按钮显示规则来源”）

> 约定：
> ✅ 可操作 | 👁 只读可见 | ❌ 不可见

### 2.2.1 活动生命周期权限

| 功能/动作      | 集团 GROUP | 区域 REGION |   门店 HOTEL |
| ---------- | -------: | --------: | ---------: |
| 查看活动列表     |        ✅ |         ✅ | 👁（仅与本店相关） |
| 查看活动详情     |        ✅ |         ✅ | 👁（仅与本店相关） |
| 创建活动       |        ✅ |         ❌ |          ❌ |
| 修改活动规则/价格  |    ✅（受限） |         ❌ |          ❌ |
| 配置渠道生效时间   |        ✅ |         ❌ |          ❌ |
| 配置适用范围（全局） |        ✅ |         ❌ |          ❌ |
| 区域启停（不改规则） |        ✅ |         ✅ |          ❌ |
| 门店报名/退出    |        ❌ |         ❌ |          ✅ |
| 门店按渠道开关    |        ❌ |         ❌ |      ✅（受限） |
| 活动下线/归档    |        ✅ |         ❌ |          ❌ |
| 查看操作日志     |        ✅ |         ✅ |  👁（仅本店相关） |

### 2.2.2 底限与风险权限

| 功能            | 集团 | 区域 | 门店 |
| ------------- | -: | -: | -: |
| 配置底限策略        |  ✅ |  ❌ |  ❌ |
| 触发底限校验（创建/修改） |  ✅ |  ❌ |  ❌ |
| 查看校验日志        |  ✅ |  ❌ |  ❌ |
| 查看风险提示（活动层）   |  ✅ |  ✅ |  ✅ |

### 2.2.3 数据看板权限

| 看板/报表    | 集团 |     区域 |      门店 |
| -------- | -: | -----: | ------: |
| 全域效果总览   |  ✅ |      ❌ |       ❌ |
| 区域效果总览   |  ✅ |      ✅ |       ❌ |
| 门店效果总览   |  ✅ | ✅（看辖区） | ✅（只看本店） |
| 导出活动报名明细 |  ✅ |  ✅（辖区） |   ✅（本店） |

---

# 你后面要生成 MD 规则文件：我建议的“PRD补全格式”

你现在已经有了：

* 页面清单（可生成路由）
* 每页原型说明（可生成布局/组件/字段/动作）
* 权限矩阵（可生成按钮可见性规则）

下一步你要做 MD 规则文件时，最关键是把每页变成这种结构化块：

* `page`：id/route/type/roles
* `layout`：sections/components
* `data_model`：table columns / detail fields / form fields
* `actions`：button + condition（来自权限矩阵+状态机）
* `states`：loading/empty/error
* `copywriting`：提示语/错误语（避免后面页面“无文案”）

---

# PRD 规则块模板（可直接复用）

> 目的：每个页面/模块都用同一结构描述，便于自动生成前端页面、路由、菜单与权限规则。

## A. 全局规则块

```
app:
  name:
  version:
  roles: [GROUP, REGION, HOTEL]
  permissions:
    - id:
      name:
      description:
  nav:
    - group_id:
      title:
      icon:
      roles: []
      items:
        - page_id:
          route:
          title:
          icon:
          roles: []
          permission_guard: []
          default: true/false
  routing:
    default_route_by_role:
      GROUP:
      REGION:
      HOTEL:
    guards:
      - rule_id:
        when:
        action: allow/deny/redirect
        redirect_to:
  global_layout:
    sidebar:
    header:
    content:
  states:
    loading:
    empty:
    error:
  dictionaries:
    - id:
      name:
      source: static/api
```

## B. 页面规则块

```
page:
  id:
  route:
  type: LIST/DETAIL/FORM_WIZARD/DASHBOARD/CALENDAR/ADMIN
  roles: []
  primary_object:
layout:
  sections:
    - id:
      components: []
data_model:
  list_columns: []
  detail_fields: []
  form_fields: []
actions:
  - id:
    label:
    roles: []
    permission_guard: []
    visible_when:
    enabled_when:
    confirm:
states:
  loading:
  empty:
  error:
copywriting:
  empty:
  error:
  hints: []
```

---

# PRD 规则补全（按模板）

## A. 全局规则块

```
app:
  name: 新促销系统
  version: V1.0
  roles: [GROUP, REGION, HOTEL]
  permissions:
    - id: PERM_CAMPAIGN_VIEW
      name: 查看活动
      description: 查看活动列表与详情
    - id: PERM_CAMPAIGN_CREATE
      name: 创建活动
      description: 创建活动向导与提交审批
    - id: PERM_CAMPAIGN_EDIT
      name: 修改活动
      description: 修改规则/价格/范围
    - id: PERM_CAMPAIGN_PAUSE
      name: 启停活动
      description: 暂停/恢复活动
    - id: PERM_CAMPAIGN_OFFLINE
      name: 下线活动
      description: 归档/下线活动
    - id: PERM_APPROVAL_VIEW
      name: 查看审批
      description: 查看审批列表与详情
    - id: PERM_APPROVAL_ACTION
      name: 审批操作
      description: 通过/驳回审批
    - id: PERM_FLOOR_VIEW
      name: 底限查看
      description: 查看底限策略与日志
    - id: PERM_FLOOR_EDIT
      name: 底限配置
      description: 编辑底限策略
    - id: PERM_ENROLL
      name: 门店报名
      description: 门店报名与退出
    - id: PERM_REGION_CONTROL
      name: 区域管控
      description: 区域启停与范围控制
    - id: PERM_ANALYTICS_VIEW
      name: 数据看板
      description: 查看效果看板与复盘
  nav:
    - group_id: NAV_OVERVIEW
      title: 促销总览
      icon: icon-dashboard
      roles: [GROUP, REGION, HOTEL]
      items:
        - page_id: PAGE_DASHBOARD_GROUP
          route: /dashboard
          title: 促销总览
          icon: icon-dashboard
          roles: [GROUP]
          permission_guard: [PERM_CAMPAIGN_VIEW]
          default: true
        - page_id: PAGE_DASHBOARD_REGION
          route: /region/dashboard
          title: 区域总览
          icon: icon-dashboard
          roles: [REGION]
          permission_guard: [PERM_CAMPAIGN_VIEW]
          default: true
        - page_id: PAGE_DASHBOARD_HOTEL
          route: /hotel/dashboard
          title: 门店总览
          icon: icon-dashboard
          roles: [HOTEL]
          permission_guard: [PERM_CAMPAIGN_VIEW]
          default: true
    - group_id: NAV_CAMPAIGN
      title: 活动管理
      icon: icon-campaign
      roles: [GROUP, REGION]
      items:
        - page_id: PAGE_CAMPAIGN_LIST
          route: /campaigns
          title: 活动列表
          icon: icon-list
          roles: [GROUP, REGION]
          permission_guard: [PERM_CAMPAIGN_VIEW]
          default: false
        - page_id: PAGE_CAMPAIGN_CREATE
          route: /campaigns/create
          title: 创建活动
          icon: icon-add
          roles: [GROUP]
          permission_guard: [PERM_CAMPAIGN_CREATE]
          default: false
        - page_id: PAGE_CAMPAIGN_APPROVAL_LIST
          route: /approvals
          title: 审批列表
          icon: icon-approval
          roles: [GROUP]
          permission_guard: [PERM_APPROVAL_VIEW]
          default: false
    - group_id: NAV_EXECUTION
      title: 报名与执行
      icon: icon-execution
      roles: [REGION, HOTEL]
      items:
        - page_id: PAGE_CALENDAR_REGION
          route: /region/calendar
          title: 区域日历
          icon: icon-calendar
          roles: [REGION]
          permission_guard: [PERM_CAMPAIGN_VIEW]
          default: false
        - page_id: PAGE_REGION_CONTROL
          route: /region/control
          title: 区域管控
          icon: icon-control
          roles: [REGION]
          permission_guard: [PERM_REGION_CONTROL]
          default: false
        - page_id: PAGE_CALENDAR_HOTEL
          route: /hotel/calendar
          title: 我的日历
          icon: icon-calendar
          roles: [HOTEL]
          permission_guard: [PERM_CAMPAIGN_VIEW]
          default: false
    - group_id: NAV_FLOOR
      title: 价格与底限
      icon: icon-floor
      roles: [GROUP]
      items:
        - page_id: PAGE_FLOOR_POLICY_LIST
          route: /floors
          title: 底限策略
          icon: icon-floor
          roles: [GROUP]
          permission_guard: [PERM_FLOOR_VIEW]
          default: false
        - page_id: PAGE_VALIDATION_LOG
          route: /floors/validation-log
          title: 校验日志
          icon: icon-log
          roles: [GROUP]
          permission_guard: [PERM_FLOOR_VIEW]
          default: false
    - group_id: NAV_ANALYTICS
      title: 数据分析
      icon: icon-analytics
      roles: [GROUP, REGION, HOTEL]
      items:
        - page_id: PAGE_ANALYTICS_OVERVIEW
          route: /analytics
          title: 效果看板
          icon: icon-analytics
          roles: [GROUP, REGION]
          permission_guard: [PERM_ANALYTICS_VIEW]
          default: false
        - page_id: PAGE_ANALYTICS_HOTEL
          route: /analytics/hotel
          title: 门店看板
          icon: icon-analytics
          roles: [HOTEL]
          permission_guard: [PERM_ANALYTICS_VIEW]
          default: false
  routing:
    default_route_by_role:
      GROUP: /dashboard
      REGION: /region/dashboard
      HOTEL: /hotel/dashboard
    guards:
      - rule_id: GUARD_ROLE
        when: role_not_allowed
        action: redirect
        redirect_to: /403
      - rule_id: GUARD_PERMISSION
        when: permission_missing
        action: redirect
        redirect_to: /403
  global_layout:
    sidebar: 左侧分组导航，按角色裁剪
    header: 面包屑 + 全局搜索 + 账号菜单
    content: 标题 + 操作区 + 内容区
  states:
    loading: Skeleton（表格或卡片）
    empty: 空态文案 + 引导按钮
    error: 错误提示 + 重试按钮 + 错误码
  dictionaries:
    - id: DICT_CHANNEL
      name: 渠道
      source: api
    - id: DICT_REGION
      name: 区域/城市
      source: api
    - id: DICT_BRAND
      name: 品牌
      source: api
    - id: DICT_CAMPAIGN_TYPE
      name: 活动类型
      source: api
```

## B. 状态机与可见性规则

```
state_machine:
  campaign_status: [DRAFT, PENDING, ACTIVE, PAUSED, OFFLINE]
  enroll_status: [NOT_ENROLLED, ENROLLED, CLOSED]
  approval_status: [PENDING, APPROVED, REJECTED]
visibility_rules:
  - id: RULE_CAMPAIGN_EDIT
    when: role==GROUP && campaign_status in [DRAFT, ACTIVE]
    show: [BTN_EDIT]
  - id: RULE_CAMPAIGN_PAUSE
    when: role in [GROUP, REGION] && campaign_status==ACTIVE
    show: [BTN_PAUSE]
  - id: RULE_HOTEL_ENROLL
    when: role==HOTEL && enroll_status==NOT_ENROLLED && campaign_status==ACTIVE
    show: [BTN_ENROLL]
```

## C. 页面规则块（示例补全 6 个核心页）

### PAGE_CAMPAIGN_LIST

```
page:
  id: PAGE_CAMPAIGN_LIST
  route: /campaigns
  type: LIST
  roles: [GROUP, REGION]
  primary_object: campaign
layout:
  sections:
    - id: filter_bar
      components: [campaign_type_select, channel_select, region_cascader, status_select, time_range, keyword_search]
    - id: summary_chips
      components: [filter_summary]
    - id: table
      components: [campaign_table, bulk_actions]
data_model:
  list_columns:
    - name: name
    - name: type
    - name: channels
    - name: scope_summary
    - name: status
    - name: risk_level
    - name: updated_at
    - name: actions
actions:
  - id: BTN_VIEW_DETAIL
    label: 查看详情
    roles: [GROUP, REGION]
    permission_guard: [PERM_CAMPAIGN_VIEW]
    visible_when: always
    enabled_when: always
  - id: BTN_PAUSE
    label: 暂停/恢复
    roles: [GROUP, REGION]
    permission_guard: [PERM_CAMPAIGN_PAUSE]
    visible_when: campaign_status in [ACTIVE, PAUSED]
    enabled_when: role==GROUP || role==REGION
states:
  loading: 列表骨架
  empty: 暂无活动，去创建
  error: 加载失败，请重试
copywriting:
  empty: 还没有活动，点击“创建活动”开始
  error: 活动列表加载失败
  hints: [支持多维筛选、支持保存常用视图]
```

### PAGE_CAMPAIGN_DETAIL

```
page:
  id: PAGE_CAMPAIGN_DETAIL
  route: /campaigns/:id
  type: DETAIL
  roles: [GROUP, REGION, HOTEL]
  primary_object: campaign
layout:
  sections:
    - id: header_status
      components: [status_badge, risk_badge, primary_actions]
    - id: tabs
      components: [tab_basic, tab_rules, tab_scope, tab_channels, tab_enroll, tab_log]
data_model:
  detail_fields:
    - name: name
    - name: type
    - name: time_range
    - name: rules
    - name: channels
actions:
  - id: BTN_EDIT
    label: 编辑
    roles: [GROUP]
    permission_guard: [PERM_CAMPAIGN_EDIT]
    visible_when: campaign_status in [DRAFT, ACTIVE]
    enabled_when: true
  - id: BTN_REGION_TOGGLE
    label: 区域启停
    roles: [REGION]
    permission_guard: [PERM_REGION_CONTROL]
    visible_when: campaign_status in [ACTIVE, PAUSED]
    enabled_when: true
states:
  loading: 详情骨架
  empty: 未找到活动
  error: 加载失败
copywriting:
  empty: 活动不存在或已下线
  error: 活动详情加载失败
  hints: [生效中活动仅允许受限修改]
```

### PAGE_CAMPAIGN_CREATE

```
page:
  id: PAGE_CAMPAIGN_CREATE
  route: /campaigns/create
  type: FORM_WIZARD
  roles: [GROUP]
  primary_object: campaign
layout:
  sections:
    - id: stepper
      components: [step_basic, step_rules, step_channels, step_scope, step_confirm]
data_model:
  form_fields:
    - name: name
    - name: type
    - name: goal
    - name: time_range
    - name: pricing_rule
    - name: channels
    - name: scope_include
    - name: scope_exclude
actions:
  - id: BTN_NEXT
    label: 下一步
    roles: [GROUP]
    permission_guard: [PERM_CAMPAIGN_CREATE]
    visible_when: always
    enabled_when: validate_current_step==true && blocking==false
states:
  loading: 表单加载中
  empty: 无
  error: 规则校验失败
copywriting:
  empty: 无
  error: 底限校验未通过
  hints: [Step2 触发 validateFloor]
```

### PAGE_CALENDAR_REGION

```
page:
  id: PAGE_CALENDAR_REGION
  route: /region/calendar
  type: CALENDAR
  roles: [REGION]
  primary_object: campaign
layout:
  sections:
    - id: calendar
      components: [calendar_view, event_popover]
data_model:
  list_columns:
    - name: date
    - name: events
actions:
  - id: BTN_REGION_TOGGLE
    label: 区域启停
    roles: [REGION]
    permission_guard: [PERM_REGION_CONTROL]
    visible_when: campaign_status in [ACTIVE, PAUSED]
    enabled_when: true
states:
  loading: 日历加载中
  empty: 当期无活动
  error: 日历加载失败
copywriting:
  empty: 当前周期暂无活动
  error: 日历加载失败
  hints: [支持日周月切换]
```

### PAGE_REGION_CONTROL

```
page:
  id: PAGE_REGION_CONTROL
  route: /region/control
  type: LIST
  roles: [REGION]
  primary_object: campaign_scope
layout:
  sections:
    - id: filters
      components: [city_filter, brand_filter, store_type_filter, campaign_type_filter]
    - id: list
      components: [campaign_scope_table, bulk_actions]
data_model:
  list_columns:
    - name: campaign_name
    - name: status
    - name: scope
actions:
  - id: BTN_BULK_TOGGLE
    label: 批量启停
    roles: [REGION]
    permission_guard: [PERM_REGION_CONTROL]
    visible_when: always
    enabled_when: selected_count>0
states:
  loading: 列表加载中
  empty: 暂无可管控活动
  error: 加载失败
copywriting:
  empty: 当前区域暂无可管控活动
  error: 区域管控加载失败
  hints: [此处操作不改变集团规则]
```

### PAGE_HOTEL_ENROLL

```
page:
  id: PAGE_HOTEL_ENROLL
  route: /hotel/enroll/:campaignId
  type: FORM
  roles: [HOTEL]
  primary_object: enroll
layout:
  sections:
    - id: summary
      components: [campaign_summary_card]
    - id: form
      components: [channel_switches, benefit_selector, submit_button]
    - id: risk_tip
      components: [risk_banner, confirm_modal]
data_model:
  form_fields:
    - name: channels
    - name: benefits
actions:
  - id: BTN_SUBMIT_ENROLL
    label: 确认报名
    roles: [HOTEL]
    permission_guard: [PERM_ENROLL]
    visible_when: enroll_status==NOT_ENROLLED
    enabled_when: true
states:
  loading: 表单加载中
  empty: 活动不可报名
  error: 报名失败
copywriting:
  empty: 当前活动不可报名
  error: 报名失败，请重试
  hints: [高风险活动提交前二次确认]
```

## D. 路由守卫与错误页

```
system_pages:
  - id: PAGE_403
    route: /403
    type: SYSTEM
    roles: [GROUP, REGION, HOTEL]
  - id: PAGE_404
    route: /404
    type: SYSTEM
    roles: [GROUP, REGION, HOTEL]
```

## E. 文案与提示语库（全局）

```
copywriting_library:
  empty:
    - 暂无数据
    - 暂无活动
  error:
    - 系统繁忙，请稍后重试
    - 加载失败，请刷新重试
  confirm:
    - 确认暂停活动？
    - 确认下线活动？
```


